!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var e=function(e,t,a){var n=a("DatetimePickerCtrl");return{open:function(e){n.openDatetimePicker(e)},close:function(){n.closeDatetimePicker()}}};e.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",e);e=function(n,l){function i(e){e&&e.remove(),l[0].body.removeEventListener("click",t.closeDatetimePicker)}var r,t=this;this.openDatetimePicker=function(e){this.closeDatetimePicker();var t=angular.element("<div datetime-picker-popup ng-cloak></div>");e.dateFormat&&t.attr("date-format",e.dateFormat),e.ngModel&&t.attr("ng-model",e.ngModel),e.year&&t.attr("year",parseInt(e.year)),e.month&&t.attr("month",parseInt(e.month)),e.day&&t.attr("day",parseInt(e.day)),e.hour&&t.attr("hour",parseInt(e.hour)),e.minute&&t.attr("minute",parseInt(e.minute)),""!==e.dateOnly&&!0!==e.dateOnly||t.attr("date-only","true"),"false"===e.closeOnSelect&&t.attr("close-on-select","false");var a=e.triggerEl;e.scope=e.scope||angular.element(a).scope(),(r=n(t)(e.scope)[0]).triggerEl=e.triggerEl,l[0].body.appendChild(r);a=a.getBoundingClientRect();e.scope.$apply();e=r.getBoundingClientRect();r.style.position="absolute",a.width>e.width?r.style.left=a.left+a.width-e.width+window.scrollX+"px":r.style.left=a.left+window.scrollX+"px",a.top<300||300<window.innerHeight-a.bottom?r.style.top=a.bottom+window.scrollY+"px":r.style.top=a.top-e.height+window.scrollY+"px",l[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(e){var t=e&&e.target,a=l[0].querySelector("div[datetime-picker-popup]");e&&t&&(t.hasAttribute("datetime-picker")||a&&a.contains(t))||i(a)}};e.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",e);var t=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        selected: (day == selectedDay),","        today: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" id="adp-time"> ','    <label class="timeLabel">Time:</label> <span class="timeValue">{{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}}</span><br/>','    <label class="hourLabel">Hour:</label> <input class="hourInput" type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel()" />','    <label class="minutesLabel">Min:</label> <input class="minutesInput" type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel()"/> ',"  </div> ","</div>"].join("\n"),e=function(n,d){function c(e,t){11<t?e++:t<0&&e--,t=(t+12)%12;var a=new Date(e,t,1),n=new Date(e,t+1,0),l=new Date(e,t,0),i=n.getDate(),n=l.getDate(),l=(a.getDay()-g+7)%7||7;return 7<(a=u.slice(0,42-(l+i))).length&&(a=a.slice(0,a.length-7)),{year:e,month:t,days:u.slice(0,i),leadingDays:u.slice(-l-(31-n),n),trailingDays:a}}var u,l,m,g;return{restrict:"A",template:t,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"="},link:function(i,r,o,s){!function(){u=[],l=[],m=[],g=0;for(var e=1;e<=31;e++)u.push(e);for(e=0;e<12;e++)l.push({fullName:n.DATETIME_FORMATS.MONTH[e],shortName:n.DATETIME_FORMATS.SHORTMONTH[e]});for(e=0;e<7;e++){var t=n.DATETIME_FORMATS.DAY[(e+g)%7];m.push({fullName:t,firstLetter:t.substr(0,1)})}g=0}();var a=o.dateFormat||"short";i.months=l,i.daysOfWeek=m,i.inputHour,i.inputMinute,!0===i.dateOnly&&(r[0].querySelector("#adp-time").style.display="none"),i.$applyAsync(function(){var e,t,a,n,l;s.triggerEl=angular.element(r[0].triggerEl),!o.ngModel||(a=""+s.triggerEl.scope().$eval(o.ngModel))&&(a.match(/[0-9]{2}:/)||(a+=" 00:00:00"),a=(a=(a=(a=(a=a.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1")).replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2")).replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,"")).replace(/\s*\(\)\s*/,"")).replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),a+=function(e){"string"==typeof e&&(e=new Date(e));var t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),a.getTimezoneOffset()),a=e.getTimezoneOffset()<a?a-60:a;return(0<=a?"-":"+")+("0"+a/60).slice(-2)+":"+("0"+a%60).slice(-2)}(a),n=new Date(a),i.selectedDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())),i.selectedDate&&!isNaN(i.selectedDate.getTime())||(l=new Date,e=i.year||l.getFullYear(),t=i.month?i.month-1:l.getMonth(),a=i.day||l.getDate(),n=i.hour||l.getHours(),l=i.minute||l.getMinutes(),i.selectedDate=new Date(e,t,a,n,l,0)),i.inputHour=i.selectedDate.getHours(),i.inputMinute=i.selectedDate.getMinutes(),i.mv=c(i.selectedDate.getFullYear(),i.selectedDate.getMonth()),i.today=d(new Date,"yyyy-M-d"),i.mv.year==i.selectedDate.getFullYear()&&i.mv.month==i.selectedDate.getMonth()?i.selectedDay=i.selectedDate.getDate():i.selectedDay=null}),i.addMonth=function(e){i.mv=c(i.mv.year,i.mv.month+e)},i.setDate=function(e){e=angular.element(e.target)[0];-1!==e.className.indexOf("selectable")&&(i.updateNgModel(parseInt(e.innerHTML)),!1!==i.closeOnSelect&&s.closeDatetimePicker())},i.updateNgModel=function(e){var t;e=e||i.selectedDate.getDate(),i.selectedDate=new Date(i.mv.year,i.mv.month,e,i.inputHour,i.inputMinute,0),i.selectedDay=i.selectedDate.getDate(),o.ngModel&&(e=(t=s.triggerEl.scope()).$eval(o.ngModel)&&"Date"===t.$eval(o.ngModel).constructor.name?new Date(d(i.selectedDate,a)):d(i.selectedDate,a),t.$eval(o.ngModel+"= date",{date:e}))},i.$on("$destroy",s.closeDatetimePicker)}}};e.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",e);e=function(e,i){return{require:"ngModel",link:function(e,a,n,l){e.$watch(n.ngModel,function(e){var t;e&&""!=e&&(t=new Date(e),l.$setValidity("date",!!t),e=new Date,n.hasOwnProperty("futureOnly")&&l.$setValidity("future-only",!(t<e)))}),a[0].addEventListener("click",function(){var e,t=a[0].value;""!=t&&(e=t.split(" ")[0].split("/"),n.year=e[2],n.month=e[0],n.day=e[1],(t=t.split(" ")[1])&&(t=t.split(":"),n.hour=t[0],n.minute=t[1])),i.open({triggerEl:a[0],dateFormat:n.dateFormat,ngModel:n.ngModel,year:n.year,month:n.month,day:n.day,hour:n.hour,minute:n.minute,dateOnly:n.dateOnly,futureOnly:n.futureOnly,closeOnSelect:n.closeOnSelect})})}}};e.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",e)}();